# 自制操作系统
`first_try_archive`目录是第一次尝试写操作系统内核的存档，是之前的老的代码，没有在这一次中使用。

`main`目录是第二次尝试编写内核的主目录，所有的源代码都放在该目录下。

# 怎么运行

在`main`目录下，运行`make qemu-driver-nodebug`可以进入系统，进入系统后有三个可以运行的指令：

* ls — 显示文件名和文件大小
* cat [file] — 读取文件内容，file为文件的名字
* clear — 清屏

qemu运行的截图演示：

![image-20230924204356394](https://gitee.com/ningbocai/pictures/raw/master/20230924/image-20230924204356394.png)

# 注意

该系统只是试验和学习上的作品，只用于自己的学习，有很多的`bug`。

# 参考

xv6-public，MIT操作系统公开课；

[osdev](https://wiki.osdev.org/Main_Page)，操作系统开发社区；

# 得到经验和教训

* c语言有自己的编程风格，没有必要按照c++对象那样每个函数都引用`self`；
* 在编程之前一定要先有规划，编程只是翻译的过程，能用语义满足设计需求的，最后一定能够编码实现；
* 每一阶段的代码，一定做好测试后，再进行下面代码的编写，必须时要自己写测试报告，记录每一个函数测试过什么内容，不然到最后的`bug`只会越来越多；
* 不要过度纠结于硬件读取寄存器相关的内容，这一方面的代码资料很短缺，在软件层面上芯片内部结构是黑盒子，调试基本找不出原因，操作系统本身就是很复杂的过程，没有必要深入每一个环节；
* 多读一些其它类`unix`系统的源代码，看看它们是怎么实现的，理解`unix`的设计哲学，自己埋头苦干容易花费大量时间，写出来的东西质量还很差。
